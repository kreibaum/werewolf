<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <title>Main</title>
    <script src="elm.js"></script>
</head>

<body>
    <div id="elm"></div>
    <script>
        // This Elm application uses a port to store information in the local storage.
        // The javascript code treats these cached values as opaque JSON objects.
        cachedValue = JSON.parse(localStorage.getItem('cache'));
        var app = Elm.Main.init({
            node: document.getElementById('elm'),
            flags: cachedValue
        });
        app.ports.cachePort.subscribe(function (data) {
            localStorage.setItem('cache', JSON.stringify(data));
            console.log(`Wrote ${JSON.stringify(data)} into local storage`);
        });
    </script>
</body>

</html>